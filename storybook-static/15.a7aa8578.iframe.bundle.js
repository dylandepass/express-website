(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"./express/scripts/bw2.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"default",(function(){return BalancedWordWrapper}));__webpack_require__("./node_modules/core-js/modules/es.string.replace.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.fill.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.array.sort.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var context=document.createElement("canvas").getContext("2d"),ALTERNATIVE_SEPS=/[\uff3f]/gm;function getTextWidth(text,font){return context.font=font,context.measureText(text).width}function getCssStyle(element,prop){return window.getComputedStyle(element).getPropertyValue(prop)}function getCanvasFontSize(){var el=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body,fontWeight=getCssStyle(el,"font-weight")||"normal",fontSize=getCssStyle(el,"font-size")||"16px",fontFamily=getCssStyle(el,"font-family")||"Times New Roman";return fontWeight+" "+fontSize+" "+fontFamily}function separateTextAndDelimiter(){for(var text=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",altRemoved=text.replace(ALTERNATIVE_SEPS,"\n"),pipedText=altRemoved.split("<wbr>").join("\n"),newText=[],seps=[],i=0;i<pipedText.length;i+=1)"\n"===pipedText[i]?seps.length>0&&(seps.pop(),seps.push(1)):(seps.push(0),newText.push(pipedText[i]));return{text:newText.join(""),seps:seps}}function getNearestWrappingPoint(){var _step,seps=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],widthsFromStart=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],pos=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,bidirectional=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],prev=-1,_iterator=_createForOfIteratorHelper(widthsFromStart.entries());try{for(_iterator.s();!(_step=_iterator.n()).done;){var _ref=_step.value,_ref2=_slicedToArray(_ref,2),i=_ref2[0],w=_ref2[1];if(1===seps[i]){if(w>pos){if(prev<0)return i;var leftDist=pos-widthsFromStart[prev],rightDist=w-pos;return leftDist<=rightDist&&bidirectional?prev:i}prev=i}}}catch(err){_iterator.e(err)}finally{_iterator.f()}return prev}function getChunkWidths(){var el=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body,text=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",seps=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],widthsFromStart=new Array(text.length);widthsFromStart.fill(0);var _step2,font=getCanvasFontSize(el),_iterator2=_createForOfIteratorHelper(seps.entries());try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _ref3=_step2.value,_ref4=_slicedToArray(_ref3,2),i=_ref4[0],v=_ref4[1];1===v&&(widthsFromStart[i]=getTextWidth(text.substring(0,i+1),font))}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return widthsFromStart[widthsFromStart.length-1]=getTextWidth(text,font),{widthsFromStart:widthsFromStart}}function insertAllLevelLineBreak(){for(var text=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",seps=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],widthsFromStart=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],maxLevel=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,ratio=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,newText="",poses=Array(text.length),wholeWidth=widthsFromStart[widthsFromStart.length-1],l=1;l<=maxLevel;l+=1){var step=wholeWidth/(l+1),firstPos=step*ratio,bidirect=ratio<=1,fbpos=getNearestWrappingPoint(seps,widthsFromStart,firstPos,bidirect);fbpos>=0&&fbpos<text.length&&(poses[fbpos]=poses[fbpos]||[],poses[fbpos].indexOf(l)<0&&poses[fbpos].push(l));for(var pos=Math.max(widthsFromStart[fbpos],step)+step;pos<wholeWidth;pos+=step){var bpos=getNearestWrappingPoint(seps,widthsFromStart,pos);bpos>=0&&bpos<text.length&&(poses[bpos]=poses[bpos]||[],poses[bpos].indexOf(l)<0&&poses[bpos].push(l))}}for(var i=0;i<text.length;i+=1)if(newText+=text[i],1===seps[i])if(poses[i]){var posStr=poses[i].map((function(v){return"jpn-balanced-wbr-l"+v})),classNames=posStr.join(" ");poses[i].length>0&&(newText+='<wbr class="'+classNames+'">')}else newText+="<wbr>";return{newText:newText,poses:poses}}function toggleWBR(){var div=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body,poses=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],widthsFromStart=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],maxLevel=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,minWidths=Array(maxLevel+1),wholeWidth=widthsFromStart[widthsFromStart.length-1];minWidths[0]=wholeWidth;for(var _loop=function _loop(l){var levelPoses=[];poses.forEach((function(p,i){p&&p.indexOf(l)>=0&&levelPoses.push(i)})),levelPoses.sort();for(var lengths=[],prevWidth=0,_i2=0,_levelPoses=levelPoses;_i2<_levelPoses.length;_i2++){var bpos=_levelPoses[_i2];lengths.push(widthsFromStart[bpos]-prevWidth),prevWidth=widthsFromStart[bpos]}lengths.push(wholeWidth-prevWidth),minWidths[l]=Math.max.apply(Math,lengths)},l=1;l<=maxLevel;l+=1)_loop(l);var resizeObserver=new ResizeObserver((function(entries){var w=entries[0].contentRect.width;if(!(w>=minWidths[0])){for(var cl=0;cl<minWidths.length&&minWidths[cl]>w;)cl+=1;cl<minWidths.length?(div.querySelectorAll("wbr.jpn-balanced-wbr-l"+cl).forEach((function(e){return e.classList.remove("wbr-off")})),div.querySelectorAll("wbr:not(.jpn-balanced-wbr-l"+cl+")").forEach((function(e){return e.classList.add("wbr-off")}))):div.querySelectorAll("wbr").forEach((function(e){return e.classList.remove("wbr-off")}))}}));resizeObserver.observe(div)}var BalancedWordWrapper=_createClass((function BalancedWordWrapper(){var _this=this,maxLineNum=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,_ratio=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;_classCallCheck(this,BalancedWordWrapper),this.applyElement=function(){var el=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body,ratio=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_this.ratio,children=el.childNodes,oriText="",hasChildElement=!1;if(children.forEach((function(node){node.nodeType===Node.ELEMENT_NODE&&"WBR"!==node.nodeName?(hasChildElement=!0,_this.applyElement(node,ratio)):node.nodeType===Node.TEXT_NODE?oriText+=node.textContent:"WBR"===node.nodeName&&(oriText+="<wbr>")})),!hasChildElement){var _separateTextAndDelim=separateTextAndDelimiter(oriText),text=_separateTextAndDelim.text,seps=_separateTextAndDelim.seps,_getChunkWidths=getChunkWidths(el,text,seps),widthsFromStart=_getChunkWidths.widthsFromStart,_insertAllLevelLineBr=insertAllLevelLineBreak(text,seps,widthsFromStart,_this.maxLevel,ratio),newText=_insertAllLevelLineBr.newText,poses=_insertAllLevelLineBr.poses;el.innerHTML=newText,toggleWBR(el,poses,widthsFromStart,_this.maxLevel)}},this.maxLevel=maxLineNum,this.ratio=_ratio}))}}]);